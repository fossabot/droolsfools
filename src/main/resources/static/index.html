<!DOCTYPE html>
<html>
	<head>
		<title>Drools fools</title>
		<meta charset="UTF-8"/>
		<script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<script src="https://unpkg.com/marked@0.3.6"></script>
		<script src="https://unpkg.com/lodash@4.16.0"></script>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" crossorigin="anonymous"/>
		<link rel="stylesheet" href="droolsfools.css" />	
</head>
<body>
	<div id="app" class="container">
		<div class="row header">
			<div class="col-sm-3 navbarSprite">
				<img alt="Drools logo" src="DroolsLogo200px.png">
				</div>
				<div class="col-sm-9">
					<h1>Drools Fools</h1>
				</div>
			</div>
			<nav class="navbar navbar-default">
				<div class="container-fluid">
					<div class="navbar-header">
						<a class="navbar-brand" href="#">Drools Fools</a>
					</div>
					<ul class="nav navbar-nav">
						<li class="active">
							<a href="index.html">Home</a>
						</li>
						<li>
							<a href="rule-admin.html">Rule admin page</a>
						</li>
					</ul>
				</div>
			</nav>
			<div class="panel panel-default">
				<div class="panel-heading">Drools rule engine example</div>
				<div class="panel-body">
This is a just a Drools example. Basic example:

					<a href="https://en.wikipedia.org/wiki/Hyper_Text_Coffee_Pot_Control_Protocol">teapot</a> rule.
If error code is 418 and time is afternoon. You can change the rules on

					<a href="rule-admin.html">rule admin</a> page.

					<ul>
						<li>when ERROR_code=200 then response='OK' </li>
						<li>when ERROR_code=418 AND message='tea' then response.message='Tea time'</li>
						<li>when ERROR_code=404 then response.message='Not found'</li>
						<li>Any other case it will respond UNKNOW</li>
					</ul>
				</div>
				<div class="panel panel-default">
					<div class="panel-heading">Incoming data form</div>
					<div class="panel-body">
						<div class="container-fluid my-form-padding" >
							<span class="col-md-2"> ERROR code:</span>
							<input class="col-md-2" v-model="errorCode" @keypress="isNumber($event)"/>
						</div>
						<div class="container-fluid my-form-padding">
							<span class="col-md-2"> VALUE:</span>
							<input class="col-md-2" v-model="value" />
						</div>
						<div class="container-fluid my-form-padding">
							<button class="btn btn-primary" v-on:click="triggerRules">Trigger rules</button>
						</div>
					</div>
				</div>
				<div class="panel panel-default">
					<div class="panel-heading">Result</div>
					<div class="panel-body">
						<span v-if="loading" style="font-size: 16px;">Please Wait ...</span>
						<span v-if="myres == -1.0">?</span>
					</div>
				</div>
			</div>
		</div>
	</div>
<script>
        var app = new Vue({
            el: '#app',
            data() {
                return {
                    info: null,
                    myres: -1.0,
                    comment: null,
                    errorCode: 200,
                    value: 'OK',
                    loading: false
                }
            },
            methods: {

                addPositiveText: function() {
                    this.comment = 'The movie was cool. The animation and the graphics were out of this world. I would recommend this movie.';
                },
                addNegativeText: function() {
                    this.comment = 'This film is shit. Bad actors, terrible story, visually nothing. I lost two hours from my life.';
                },
                triggerRules: function() {
                    this.loading = true;
                    var url = window.location.origin;
                    axios.post(url + '/api/trigger_rules/DEFAULT', {
                            errorCode: this.errorCode,
                            value: this.value
                        })
                        .then(response => {
                            this.myres = response.data;
                            this.loading = false;
                            console.log(this.myres);
                        })
                        .catch(error => {
                            console.log(error);
                            this.loading = false;
                        });
                },
                 isNumber: function(evt) {
                  evt = (evt) ? evt : window.event;
                  var charCode = (evt.which) ? evt.which : evt.keyCode;
                  if ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {
                    evt.preventDefault();;
                  } else {
                    return true;
                  }
                }
            }

        })
    
		</script>
	</body>
</html>
